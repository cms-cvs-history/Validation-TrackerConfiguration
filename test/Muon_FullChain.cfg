process TrackerValidation  = {
    
    # initialize  MessageLogger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"   
    
    # initialize magnetic field
    include "Configuration/StandardSequences/data/Geometry.cff"
    include "Configuration/StandardSequences/data/MagneticField.cff"
    
    #Fake Conditions
    include "Configuration/StandardSequences/data/FakeConditions.cff"

    untracked PSet maxEvents = {untracked int32 input = -1}
    source = PoolSource 
    {
	untracked vstring fileNames = {"file:./Muon.root"}
    }
    
    module o1 = PoolOutputModule { 
	untracked string fileName = "Muon_FullValidation.root"      
    }
    
    # DQM services
    include "DQMServices/Core/data/DQM.cfg"
    replace DQM.collectorHost = ""

    
    service = RandomNumberGeneratorService
    {
	untracked uint32 sourceSeed = 135799753
	PSet moduleSeeds = 
	{
	    untracked uint32 VtxSmeared = 123456789
	    untracked uint32 g4SimHits = 194098651
	    untracked uint32 mix = 9823 
	    untracked uint32 siStripDigis = 563
	    untracked uint32 siPixelDigis = 653
	}
    }
    
    service = Timing{ }
    
    service = SimpleMemoryCheck{ }
    
  include "SimG4Core/Configuration/data/SimG4Core.cff"
    replace g4SimHits.Generator.HepMCProductLabel = "source" 
    
  include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"			
    
    include "Validation/TrackerHits/data/trackerHitsValidation.cff"
    
    # Mixing Module
    include "SimGeneral/MixingModule/data/mixNoPU.cfi"
    
    # TRACKER digitization sequence
    include "SimTracker/Configuration/data/SimTracker.cff" 
    
    # TRACKER digis validation sequence
    include "Validation/TrackerDigis/data/trackerDigisValidation.cff"
    
    # TRACKER reconstruction sequence
    include "Configuration/StandardSequences/data/Reconstruction.cff"
    include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"
    replace TrackRefitter.TrajectoryInEvent = true

    # TRACKER rechits validation sequence
    include "Validation/TrackerRecHits/data/trackerRecHitsValidation.cff"
    
    # TRACKER reco Tracks validation sequence
    # Tracking Truth
    include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"
    # Validation TP
    include "Validation/TrackingMCTruth/data/trackingTruthValidation.cfi"
    
    # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"
    
    include "Validation/RecoTrack/data/cuts.cff"
    include "Validation/RecoTrack/data/MultiTrackValidator.cfi"
    replace multiTrackValidator.label={cutsRecoTracks,cutsRS}

    include "Validation/RecoTrack/data/SiPixelTrackingRecHitsValid.cfi"
    include "Validation/RecoTrack/data/SiStripTrackingRecHitsValid.cfi"
   
    sequence simhits = {g4SimHits, trackerHitsValidation}	
    sequence digis = {trDigi, trackerDigisValidation}
    sequence rechits = {trackerlocalreco, trackerRecHitsValidation}
    sequence tracks = {offlineBeamSpot,recopixelvertexing,trackingParticles, trackingTruthValid, ckftracks, rstracks, cutsRecoTracks, cutsRS, cutsTPEffic, cutsTPFake, multiTrackValidator}
    sequence trackinghits = {TrackRefitter, PixelTrackingRecHitsValid,StripTrackingRecHitsValid}
    
    
    path p1 = { simhits , mix , digis , rechits, tracks, trackinghits}
    
    endpath outpath = { o1 }
    
}		
