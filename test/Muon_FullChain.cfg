process TrackerValidation  = {
    
    # initialize  MessageLogger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"   
    
    # initialize geometry and magnetic field
    include "Configuration/StandardSequences/data/Geometry.cff"
    include "Configuration/StandardSequences/data/MagneticField.cff"
    
    #Fake Conditions
    include "Configuration/StandardSequences/data/FakeConditions.cff"

    untracked PSet maxEvents = {untracked int32 input = 1}

    source = PoolSource 
    {
	untracked vstring fileNames = {"file:./Muon.root"}
    }
    
    module o1 = PoolOutputModule { 
	untracked string fileName = "Muon_FullValidation.root"      
    }
    
    #  services
    include "Configuration/StandardSequences/data/Services.cff"
    
    service = Timing{ }
    
    service = SimpleMemoryCheck{ }
    
  include "SimG4Core/Configuration/data/SimG4Core.cff"
    replace g4SimHits.Generator.HepMCProductLabel = "source" 
    
  include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"			
    
    include "Validation/TrackerHits/data/trackerHitsValidation.cff"
    
    # Mixing Module
    include "SimGeneral/MixingModule/data/mixNoPU.cfi"
    
    # TRACKER digitization sequence
    include "SimTracker/Configuration/data/SimTracker.cff" 
    
    # TRACKER digis validation sequence
    include "Validation/TrackerDigis/data/trackerDigisValidation.cff"
    
    # TRACKER reconstruction sequence
    include "Configuration/StandardSequences/data/Reconstruction.cff"
    include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"
#    replace TrackRefitter.TrajectoryInEvent = true

    # TRACKER rechits validation sequence
    include "Validation/TrackerRecHits/data/trackerRecHitsValidation.cff"
    
    # TRACKER reco Tracks validation sequence
    # Tracking Truth
    include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"
    # Validation TP
    include "Validation/TrackingMCTruth/data/trackingTruthValidation.cfi"
        # Tracks
    include "Validation/RecoTrack/data/TrackValidation.cff"
    
    # Tracking rechits
    include "Validation/RecoTrack/data/SiTrackingRecHitsValid.cff"
  
    sequence simhits = {g4SimHits, trackerHitsValidation}	
    sequence digis = {trDigi, trackerDigisValidation}
    sequence rechits = {trackerlocalreco, trackerRecHitsValidation}
    sequence tracks = {offlineBeamSpot,recopixelvertexing,trackingParticles, trackingTruthValid, ckftracks,trackerRecHitsValidation }
    sequence trackinghits = {TrackRefitter,trackingRecHitsValid }
    
    
    path p1 = { simhits , mix , digis , rechits, tracks, trackinghits}
    
    endpath outpath = { o1 }
    
}		
