process TrackerValidation  = {
    
    # initialize  MessageLogger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"   
    
    # initialize magnetic field
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    
    include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
    include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
    
    #Tracker Fake Condition
    # Tracker alignment
    #
    include "CalibTracker/Configuration/data/Tracker_FakeAlignment.cff"
    #
    # Pixel calib
    #
    include "CalibTracker/Configuration/data/SiPixel_FakeGain.cff"
    # the following is in reality not needed because the default is false,
    # need to put the "true" replace in Frontier.....
    replace siPixelClusters.UseCalibDataFromDB = false
    #
    # Strip calib
    #
    include "CalibTracker/Configuration/data/SiStrip_FakeGain.cff"
    include "CalibTracker/Configuration/data/SiStrip_FakeNoise.cff"
    include "CalibTracker/Configuration/data/SiStrip_FakePedestals.cff"
    include "CalibTracker/Configuration/data/SiStrip_FakeLorentzAngle.cff"

    untracked PSet maxEvents = {untracked int32 input = -1}
    source = PoolSource 
    {
	untracked vstring fileNames = {"file:./Muon.root"}
    }
    
    module o1 = PoolOutputModule { 
	untracked string fileName = "Muon_FullValidation.root"      
    }
    
    # DQM services
    service = DaqMonitorROOTBackEnd{ }
    
    service = RandomNumberGeneratorService
    {
	untracked uint32 sourceSeed = 135799753
	PSet moduleSeeds = 
	{
	    untracked uint32 VtxSmeared = 123456789
	    untracked uint32 g4SimHits = 194098651
	    untracked uint32 mix = 9823 
	    untracked uint32 siStripDigis = 563
	    untracked uint32 siPixelDigis = 653
	}
    }
    
    service = Timing{ }
    
    service = SimpleMemoryCheck{ }
    
  include "SimG4Core/Application/data/SimG4Object.cfi"
    replace g4SimHits.Generator.HepMCProductLabel = "source" 
    
  include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"			
    
    include "Validation/TrackerHits/data/trackerHitsValidation.cff"
    
    # Mixing Module
    include "SimGeneral/MixingModule/data/mixNoPU.cfi"
    
    # TRACKER digitization sequence
    include "SimTracker/Configuration/data/SimTracker.cff" 
    
    # TRACKER digis validation sequence
    include "Validation/TrackerDigis/data/trackerDigisValidation.cff"
    
    # TRACKER LocalReco sequence 
    include "RecoLocalTracker/Configuration/data/RecoLocalTracker.cff"       
    
    # TRACKER rechits validation sequence
    include "Validation/TrackerRecHits/data/trackerRecHitsValidation.cff"
    
    # TRACKER TracReco sequence 
    include "RecoTracker/Configuration/data/RecoTracker.cff"       
    
    
    # TRACKER reco Tracks validation sequence
    # Tracking Truth
    include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"
    #replace trackingParticles.HepMCDataLabels = {"source"}
    
    # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"
    
    include "Validation/RecoTrack/data/cuts.cff"
    include "Validation/RecoTrack/data/MultiTrackValidator.cfi"
    
    include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"
    replace TrackRefitter.TrajectoryInEvent = true
    
    include "Validation/RecoTrack/data/SiPixelTrackingRecHitsValid.cfi"
    include "Validation/RecoTrack/data/SiStripTrackingRecHitsValid.cfi"
    
    sequence simhits = {g4SimHits, trackerHitsValidation}	
    sequence digis = {trDigi, trackerDigisValidation}
    sequence rechits = {trackerlocalreco, trackerRecHitsValidation}
    sequence tracks = {trackingParticles, ckftracks, rstracks, cutsCKF, cutsRS, cutsTPEffic, cutsTPFake, multiTrackValidator}
    sequence trackinghits = {TrackRefitter, PixelTrackingRecHitsValid,StripTrackingRecHitsValid}
    
    
    path p1 = { simhits , mix , digis , rechits, tracks, trackinghits}
    
    endpath outpath = { o1 }
    
}		
